---
layout: page
title: 仕様と型
category: advanced
order: 9
lang: ja
---

このレッスンでは `@spec` と `@type` の文法について学びます。最初の `@spec` はツールによって解析できるドキュメントを書くための文法をより完全にするものです。二番目の `@type` はコードをより読みやすく理解しやすいものにする手助けをしてくれます。

{% include toc.html %}

## イントロダクション

あなたが自分で書いた関数のインターフェイスを記述したいというのはそんなに珍しいことではないでしょう。もちろん [@doc アノテーション](/lessons/basic/documentation)を使うこともできますが、他の開発者にとってそれはコンパイル時にチェックされない単なる情報に過ぎません。この目的のために、Elixirには `@spec` アノテーションがあり、コンパイラによってチェックされる関数の使用を記述することができます。

しかしながらいくつかのケースにおいて仕様は相当に大きくなったり複雑になったりしがちです。複雑さを少なくしたいのなら独自の型の定義を導入したくなるかもしれません。そのためにElixirには `@type` アノテーションがあります。一方でElixirは結局のところ動的言語です。このことは型に関する情報は全てコンパイラには無視されますが、別のツールによって使われるということを意味します。

## 仕様(specification)

もし、あなたがJavaまたはRubyの経験をお持ちなら仕様を｀interface`だと考えてよいでしょう。仕様は関数の取るべき引数と戻り値の型を定義します。

入出力の型を定義するには `@spec` ディレクティブを関数定義の直前に置いて `引数` として関数名、引数の型のリスト、そして `::` の後に戻り値の型を描きます。

例を見てみましょう:

```elixir
@spec sum_product(integer) :: integer
def sum_product(a) do
    [1, 2, 3]
    |> Enum.map(fn el -> el * a end)
    |> Enum.sum
end

@spec simple_div(integer, integer) :: {atom, integer}
def simple_div(a,b) do
    
    a + b
end
```